---
// Language Detection Component
// Automatically redirects to the user's preferred language on first visit
---

<script is:inline>
  (function() {
    // Only run on the homepage to avoid redirect loops
    if (window.location.pathname !== '/') return;

    // Check if user has manually selected a language before
    const hasManualSelection = localStorage.getItem('manual-locale-selection');
    if (hasManualSelection) return;

    // Get browser language
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.toLowerCase().split('-')[0]; // Get 'es' from 'es-ES'

    // If browser language is Spanish, redirect to Spanish version
    if (langCode === 'es') {
      window.location.href = '/es/';
    }
  })();
</script>
